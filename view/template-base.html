<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">SALA DE INFORM√ÅTICA DE C√ìMPUTO PARA ALUMNOS</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css" rel="stylesheet">
    <!-- Base Styles -->
    <link href="../css/base-styles.css" rel="stylesheet">
    <!-- Page Specific Styles (will be added dynamically) -->
    <link id="page-styles" href="" rel="stylesheet">
</head>
<body>
    <!-- Header Component -->
    <div id="header-component"></div>

    <!-- Navigation Component -->
    <div id="navbar-component"></div>

    <!-- Main Content Area -->
    <main class="main-content" id="main-content">
        <!-- Content will be loaded here -->
    </main>

    <!-- Footer Component -->
    <div id="footer-component"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    
    <!-- ‚úÖ FIREBASE (si est√° disponible) -->
    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
    
    <!-- Firebase Config -->
    <script src="../firebase-config.js"></script>
    
    <!-- Base Components JS -->
    <script src="../js/components.js"></script>
    <!-- Base Navigation JS -->
    <script src="../js/navigation.js"></script>
    
    <!-- ‚úÖ SISTEMA DE CIERRE AUTOM√ÅTICO 9 PM -->
    <script src="../js/auto-cierre-9pm.js"></script>
    
    <!-- Page Specific JS (will be added dynamically) -->
    <script id="page-script" src=""></script>

    <!-- ‚úÖ INSTANCIA GLOBAL DEL SISTEMA DE CIERRE -->
    <script>
        // Inicializar sistema de cierre autom√°tico cuando todo est√© listo
        document.addEventListener('DOMContentLoaded', function() {
            // Esperar un poco para que Firebase se inicialice
            setTimeout(function() {
                try {
                    // Instanciar el sistema de cierre autom√°tico
                    window.sistemaAutoCierre9PM = new AutoCierre9PM();
                    
                    console.log('üéØ Sistema de cierre autom√°tico 9 PM inicializado globalmente');
                    console.log('üí° Funciones disponibles en consola:');
                    console.log('   - probarCierre9PM()');
                    console.log('   - estadoCierre9PM()');
                    console.log('   - configurarHoraCierre(hora, minuto)');
                    
                } catch (error) {
                    console.error('‚ùå Error inicializando sistema de cierre autom√°tico:', error);
                }
            }, 2000); // Esperar 2 segundos para que Firebase est√© listo
        });

        // ‚úÖ LIMPIAR AL SALIR DE LA P√ÅGINA
        window.addEventListener('beforeunload', function() {
            if (window.sistemaAutoCierre9PM) {
                window.sistemaAutoCierre9PM.detenerVigilante();
            }
        });

        // ‚úÖ REACTIVAR SI LA P√ÅGINA VUELVE A ESTAR VISIBLE (opcional)
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden && window.sistemaAutoCierre9PM) {
                // Verificar si el vigilante sigue activo
                if (!window.sistemaAutoCierre9PM.vigilanteActivo) {
                    console.log('üîÑ Reactivando vigilante de cierre autom√°tico');
                    window.sistemaAutoCierre9PM.iniciarVigilante();
                }
            }
        });
    </script>
</body>
</html>